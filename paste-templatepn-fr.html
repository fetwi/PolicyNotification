<style type="text/css">/* PN Filters and Titles */
label {font-weight: normal}
.dataTables_info {display: block !important;margin: 0 0 10px;font-family: Lato, sans-serif;color: #704d2d !important;font-size: 26px;}
#pn-table_filter {display: none}

/* Buttons */
.btn-brown{background-color:#704d2d !important;}
.btn-brown:hover{background-color:#d6af87 !important;}
.btn-secondary{color: #704d2d; background-color: #ffffff;border:1px solid #704d2d;border-radius:4px}
.btn-secondary:hover{color: #ffffff;background-color: #704d2d;}

/* PN Table */ 
#pn-table{margin:20px 0;border:none;}
#pn-table tbody tr:hover {background: #f9f6f4;}

/*Sorting ascending*/
table.dataTable thead .sorting .sorting-icons::before {
    content: "\e113";
    padding: 0px;
}

/*Sorting descending*/
table.dataTable thead .sorting .sorting-icons::after {
    content: "\e114";
    padding: 0px;
}

/*Sorting not active in column*/
table.dataTable thead .sorting .sorting-icons::before, table.dataTable thead .sorting .sorting-icons::after, table.dataTable thead .sorting_asc .sorting-icons::after, table.dataTable thead .sorting_desc .sorting-icons::before {
    background: #704d2d;
    border: 1px;
    color: #ffffff;
}

/*Arrow box border*/
table.dataTable thead .sorting_asc .sorting-icons::before, table.dataTable thead .sorting_desc .sorting-icons::after {
    background: #ccc;
    border: 1px solid #111;
    color: #000;
}

/*Column sorted, activate arrow*/
table.dataTable thead .sorting_asc .sorting-icons::before, table.dataTable thead .sorting_desc .sorting-icons::after {
    background: #704d2d;
    border: 1px;
    color: #ffffff;
}

/*Column sorted, non-activate arrow*/
table.dataTable thead .sorting_asc .sorting-icons::after, table.dataTable thead .sorting_desc .sorting-icons::before {
    background: #704d2d;
    border: 1px;
    color: #704d2d;
}

  /*Input field borders on click consistency*/
 .form-text:focus {
	border-color: transparent;
	border-radius: 4px;
	outline: 2px solid black;
}

 /*Input field borders on click consistency*/
.form-control:focus {
	transition: none;
	border-color: transparent !important;
	box-shadow: none;
	outline: 2px solid black;
}

/* Table Headings */
#pn-table th {vertical-align:middle;font-size:17px}
#pn-table .sorting_asc,#pn-table .sorting_desc {background-color: #704d2d;}
table.dataTable thead, table.dataTable tfoot{background: #704d2d;color: #ffffff;height: 60px;}
table.dataTable thead th, table.dataTable tfoot th {font-weight: normal; margin-top: 15px;}
#pn-table th:nth-child(1) {min-width: 104px;}
#pn-table th:nth-child(2) {min-width: 87px;}
#pn-table th:nth-child(3) {text-align:center;}
#pn-table th:nth-child(4) {min-width: 94px;}
#pn-table th:nth-child(5) {min-width: 108px;}
#pn-table th:nth-child(6) {text-align:center;min-width: 108px;}

/* Table Cells */
#pn-table th, td {padding: 8px;}
td:focus, th:focus{outline-offset: -3px;outline: 3px dotted #7B4C2B !important}

/* Expanding Triangle */
table.dataTable td.dt-control {text-align: center;}
table.dataTable button.dt-control {font-size: 12pt;border: 1px solid #704d2d;padding: 3px 10px;width: 108px;display: block;border-radius: 4px;color: #704d2d;background-color: #ffffff;}
table.dataTable tr.dt-hasChild button.dt-control {font-size: 12pt;color: #fff;background-color: #704d2d;}
html.dark table.dataTable td.dt-control:before,:root[data-bs-theme=dark] table.dataTable td.dt-control:before,:root[data-theme=dark] table.dataTable td.dt-control:before {border-left-color: #ffffff;}
html.dark table.dataTable tr.dt-hasChild td.dt-control:before,:root[data-bs-theme=dark] table.dataTable tr.dt-hasChild td.dt-control:before,:root[data-theme=dark] table.dataTable tr.dt-hasChild td.dt-control:before {border-top-color: #ffffff;  border-left-color: transparent;}

/* PN Content */
.print-clause{position: sticky;top: 20px;margin: 12px 14px 0 0;}
.form-control{border-color:#767676;}
.dataTables_wrapper .dataTables_info:after {content: none;}
.form-text{width:100%}
.pn-content {background-color:#fff;padding: 5px 30px 20px;border-radius: 8px;border: 1px solid #704d2d;}
.pn-content h1 {font-weight: 500;margin-top: 0;font-size: 1.8em !important;}
.pn-content h2{font-size: 1.6em !important;}
.pn-content h3{font-size: 1.42em !important;}
.pn-content h4{font-size: 1.27em !important;}
.pn-content h5{font-size: 1.13em !important;}
.pn-content p,.pn-content {font-family: 'Noto Sans', sans-serif;font-size: 1em !important;}
.blankline{border-bottom: 1px solid #000;width: 90px;display: inline-block;}

/* Pagination */
.dataTables_wrapper .dataTables_paginate .paginate_button {background-color: #eaebed;border: 1px solid #dcdee1;color: #704d2d;}
.dataTables_wrapper .dataTables_paginate .paginate_button.current {background-color: #704d2d;border-color: #704d2d;color: #fff;}
.dataTables_wrapper .dataTables_paginate .paginate_button:hover, .dataTables_wrapper .dataTables_paginate .paginate_button:focus, .dataTables_wrapper .dataTables_paginate .paginate_button:active {background-color: #d4d6da;border-color: #bbbfc5;color: #704d2d;cursor: pointer;}
</style>
<script src="https://achatscanada.canada.ca/sites/default/files/PN/fr/jquery.min.js"></script><script src="https://achatscanada.canada.ca/sites/default/files/PN/fr/jquery.dataTables.min.js"></script>
<h2 class="mrgn-tp-lg mrgn-bttm-lg" id="parcourir-ap-precedents" style="color: #704d2d">Parcourir les avis de politique précédents</h2>

<p>Recherchez dans la liste des anciens PN en utilisant les filtres ci-dessous. Vous pouvez filtrer selon l'ID de la CP, le titre ou la date de publication, ou le numéro de version du Guide des approvisionnements ou du Guide des Clauses et conditions uniformisées d'achat (CCUA) dans lequel les modifications ont été intégrées, le cas échéant.</p>

<form class="wb-tables-filter" data-bind-to="pn-table">
<div class="row mrgn-tp-md">
<div class="col-md-3">
<div class="form-group"><label for="dt_pnid">Numéro de l'AP contient</label> <input _mstaria-label="751270" aria-label="Filtre de tableau, Numéro de l'AP " class="form-text" data-column="1" id="dt_pnid" maxlength="128" name="dt_pnid" type="text" value="" /></div>
</div>

<div class="col-md-9">
<div class="form-group"><label for="dt_title">Titre contient</label> <input _mstaria-label="659997" aria-label="Filtre de tableau, Titre de l'AP" class="form-text" data-column="2" id="dt_title" maxlength="128" name="dt_title" type="text" value="" /></div>
</div>
</div>

<div class="row mrgn-tp-md">
<div class="col-md-4">
<div class="form-group"><label for="dt_date"><font _mstmutation="1">Date de sortie</font><span class="datepicker-format"> (<abbr title="Four digits year, dash, two digits month, dash, two digits day">YYYY-MM-DD</abbr>)</span></label> <input _mstaria-label="761592" aria-label="Filtre de tableau, Date de sortie " class="form-control" data-column="0" id="dt_date" max="2024-12-31" min="1995-01-01" name="dt_date" type="date" /></div>
</div>

<div class="col-md-4">
<div class="form-group"><label for="dt_smver">Version du <abbr title="Guide des approvisionnements">GDA</abbr></label> <select _mstaria-label="722228" aria-label="Filtre de tableau, Version du GDA" class="form-control" data-column="3" id="dt_smver" name="dt_smver"> <optgroup _mstlabel="294606" label="Options de groupe"><option selected="selected" value="">Tous</option><option value="Active">Actif</option><option value="No change">Aucune modification</option> </optgroup> <optgroup _mstlabel="382226" label="Version spécifique"><option value="2023-2">2023-2</option><option value="2022-4">2022-4</option><option value="2022-3">2022-3</option><option value="2022-2">2022-2</option><option value="2022-1">2022-1</option><option value="2021-3">2021-3</option><option value="2021-2">2021-2</option><option value="2021-1">2021-1</option><option value="2020-3">2020-3</option><option value="2020-2">2020-2</option><option value="2020-1">2020-1</option><option value="2019-3">2019-3</option><option value="2019-2">2019-2</option><option value="2019-1">2019-1</option><option value="2018-2">2018-2</option><option value="2018-1">2018-1</option><option value="2017-5">2017-5</option><option value="2017-4">2017-4</option><option value="2017-3">2017-3</option><option value="2017-2">2017-2</option><option value="2017-1.1">2017-1.1</option><option value="2017-1">2017-1</option><option value="2016-2">2016-2</option><option value="2016-1">2016-1</option><option value="2015-4.1">2015-4.1</option><option value="2015-4">2015-4</option><option value="2015-3">2015-3</option><option value="2015-2.1">2015-2.1</option><option value="2015-2">2015-2</option><option value="2015-1.5">2015-1.5</option><option value="2015-1.4">2015-1.4</option><option value="2015-1.3">2015-1.3</option><option value="2015-1.2">2015-1.2</option><option value="2015-1.1">2015-1.1</option><option value="2015-1">2015-1</option><option value="2015-0.2">2015-0.2</option><option value="2015-0.1">2015-0.1</option><option value="2014-5.1">2014-5.1</option><option value="2014-5">2014-5</option><option value="2014-4">2014-4</option><option value="2014-3.1">2014-3.1</option><option value="2014-3">2014-3</option><option value="2014-2">2014-2</option><option value="2014-1.1">2014-1.1</option><option value="2014-1">2014-1</option><option value="2013-6.2">2013-6.2</option><option value="2013-6.1">2013-6.1</option><option value="2013-6">2013-6</option><option value="2013-5">2013-5</option><option value="2013-4">2013-4</option><option value="2013-3">2013-3</option><option value="2013-2">2013-2</option><option value="2013-1">2013-1</option><option value="2012-5.1">2012-5.1</option><option value="2012-5">2012-5</option><option value="2012-4">2012-4</option><option value="2012-3">2012-3</option><option value="2012-2">2012-2</option><option value="2012-1">2012-1</option><option value="2011-1">2011-1</option><option value="2010-1">2010-1</option><option value="2008-2">2008-2</option><option value="2008-1">2008-1</option><option value="2007-2">2007-2</option><option value="2007-1">2007-1</option><option value="2006-2">2006-2</option><option value="2006-1">2006-1</option><option value="2005-2">2005-2</option><option value="2005-1">2005-1</option><option value="2004-2">2004-2</option><option value="2004-1">2004-1</option><option value="2003-2">2003-2</option><option value="2003-1">2003-1</option><option value="2002-2">2002-2</option><option value="2002-1">2002-1</option><option value="2001-2">2001-2</option><option value="2001-1">2001-1</option><option value="2000-1">2000-1</option><option value="1999-2">1999-2</option><option value="1999-1">1999-1</option><option value="1998-3">1998-3</option><option value="1998-2">1998-2</option><option value="1998-1">1998-1</option><option value="1997-2">1997-2</option><option value="1997-1">1997-1</option><option value="1996-3">1996-3</option><option value="1996-2">1996-2</option> </optgroup> </select></div>
</div>

<div class="col-md-4">
<div class="form-group"><label for="dt_sacver">Version du <abbr title="clauses et conditions uniformisées d'achat">CCUA</abbr></label> <select _mstaria-label="758550" aria-label="Filtre de tableau, Version du CCUA" class="form-control" data-column="4" id="dt_sacver" name="dt_sacver"> <optgroup _mstlabel="294606" label="Options de groupe"><option selected="selected" value="">Tous</option><option value="Active">Actif</option><option value="No change">Aucune modification</option> </optgroup> <optgroup _mstlabel="382226" label="Version spécifique"><option value="2023-2">2023-2</option><option value="2023-1">2023-1</option><option value="2022-4">2022-4</option><option value="2022-3">2022-3</option><option value="2022-2">2022-2</option><option value="2022-1">2022-1</option><option value="2021-3">2021-3</option><option value="2021-2">2021-2</option><option value="2021-1">2021-1</option><option value="2020-3">2020-3</option><option value="2020-2">2020-2</option><option value="2020-1">2020-1</option><option value="2019-2">2019-2</option><option value="2019-1">2019-1</option><option value="2018-2">2018-2</option><option value="2018-1">2018-1</option><option value="2017-5">2017-5</option><option value="2017-4">2017-4</option><option value="2017-3">2017-3</option><option value="2017-2">2017-2</option><option value="2017-1">2017-1</option><option value="2016-2">2016-2</option><option value="2016-1">2016-1</option><option value="2015-5">2015-5</option><option value="2015-4">2015-4</option><option value="2015-3">2015-3</option><option value="2015-2">2015-2</option><option value="2015-1">2015-1</option><option value="2014-5">2014-5</option><option value="2014-4">2014-4</option><option value="2014-3">2014-3</option><option value="2014-2">2014-2</option><option value="2014-1">2014-1</option><option value="2013-5">2013-5</option><option value="2013-4">2013-4</option><option value="2013-3">2013-3</option><option value="2013-2">2013-2</option><option value="2013-1">2013-1</option><option value="2012-4">2012-4</option><option value="2012-3">2012-3</option><option value="2012-2">2012-2</option><option value="2012-1">2012-1</option><option value="2011-1">2011-1</option><option value="2010-1">2010-1</option><option value="2008-1">2008-1</option><option value="2007-2">2007-2</option><option value="2007-1">2007-1</option><option value="2006-2">2006-2</option><option value="2006-1">2006-1</option><option value="2005-2">2005-2</option><option value="2005-1">2005-1</option><option value="2004-2">2004-2</option><option value="2004-1">2004-1</option><option value="2003-2">2003-2</option><option value="2003-1">2003-1</option><option value="2002-2">2002-2</option><option value="2002-1">2002-1</option><option value="2001-2">2001-2</option><option value="2001-1">2001-1</option><option value="2000-1">2000-1</option><option value="1999-2">1999-2</option><option value="1998-3">1998-3</option><option value="1998-2">1998-2</option><option value="1998-1">1998-1</option><option value="1997-2">1997-2</option><option value="1997-1">1997-1</option><option value="1996-2">1996-2</option><option value="1996-1">1996-1</option> </optgroup> </select></div>
</div>
</div>

<div class="row mrgn-tp-lg mrgn-bttm-lg">
<div class="col-xs-12 col-md-6 mrgn-lft-md pull-right"><button class="col-xs-12 col-md-6 mrgn-tp-sm btn btn-secondary" id="clear-btn" type="reset">SUPPRIMER LES FILTRES</button><button class="pull-right col-xs-12 col-md-5 mrgn-tp-sm btn btn-primary btn-brown" id="filter-btn" type="submit">APPLIQUER LES FILTRES</button></div>
</div>
</form>

<div class="table-responsive mrgn-bttm-xl" tabindex="0">
<table id="pn-table">
	<caption class="wb-inv">Tableau des notifications de stratégie: ce tableau affiche le contenu des notifications de stratégie, qui est révélé pour chaque ligne lorsque vous appuyez sur la touche Entrée du contrôle de développement dans la dernière colonne.</caption>
	<thead>
		<tr>
			<th role="columnheader" scope="col">Date de sortie</th>
			<th role="columnheader" scope="col">Numéro de l'AP</th>
			<th role="columnheader" scope="col">Titre</th>
			<th role="columnheader" scope="col">Version du GDA</th>
			<th role="columnheader" scope="col">Version des CCUA</th>
			<th role="columnheader" scope="col">Action</th>
		</tr>
	</thead>
	<tbody class="row wb-eqht wb-init wb-eqht-inited" id="wb-auto-1">

{here}

	</tbody>
</table>
</div>
<script>
function format (content) {
    return content;
}

// Function to get URL parameter
function getUrlParameter(name) {
    name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
    var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
    var results = regex.exec(location.search);
    return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
}

var table = $('#pn-table').DataTable({
	dom: 'ilrtp',
	drawCallback: function(settings) {
            $('#pn-table thead th').removeAttr('rowspan').removeAttr('colspan');
			},
	columns: [
		{ data: 'Date de sortie', orderable: false},
		{ data: "Numéro de l'AP", orderable: false},
		{ data: 'Titre', orderable: false},
		{ data: 'Version du GDA', orderable: false},
		{ data: 'Version des CCUA', orderable: false},
		{
			className: 'dt-control',
			orderable: false,
			data: null,
			defaultContent: '<button class="dt-control" tabindex="0">Agrandir</button>'
		},
	],
	order: [[0, 'desc']],
	language:{
		"decimal": " ",
		"emptyTable": "Aucune donnée disponible dans le tableau",
		"info": "Affichage de _START_ à _END_ sur _TOTAL_ entrées",
		"infoEmpty": "Affichage de 0 à 0 sur 0 entrées",
		"infoFiltered": "(filtrées depuis un total de _MAX_ entrées)",
		"lengthMenu": "Afficher _MENU_ entrées",
		"loadingRecords": "Chargement...",
		"search": "Rechercher :",
		"zeroRecords": "Aucune entrée correspondante trouvée",
		"paginate": {
			"first": "Première",
			"last": "Dernière",
			"next": "Suivante",
			"previous": "Précédente"
		}
	},
});
// Apply filter based on URL parameter
$(document).ready(function() {
    var pnIdKeyword = getUrlParameter('pnid');
    if (pnIdKeyword) {
        table.column(1).search(pnIdKeyword).draw();
    }
});

// Attach click event to filter button
$('#filter-btn').on('click', function(event) {
  event.preventDefault();
  $('input.form-text, select.form-control, input[type="date"]').each(function() {
	table
	  .column($(this).data('column'))
	  .search(this.value)
	  .draw();
	});
});

// Attach click event to clear button
$('#clear-btn').on('click', function(event) {
  event.preventDefault();
  $('input.form-text, select.form-control, input[type="date"]').val('').change();
  table.search('').columns().search('').draw();
});

$('#pn-table tbody').on('click', 'button.dt-control', function() {
    var tr = $(this).closest('tr');
    var row = table.row(tr);

    if (row.child.isShown()) {
        // This row is already open - close it
        row.child.hide();
        $(this).text('Agrandir');
		console.log("PN ID " + tr[0]['cells'][1]["innerHTML"] + " a été réduit.");  //logs the specific policy ID and state for accessibility
    } else {
        // Open this row
        var childContent = tr.data('child-content');
        var decodedContent = decodeURIComponent(childContent);
        row.child(format(decodedContent)).show();
        row.child().find('td').attr('tabindex', -1);
        $(this).text('Réduire');
		console.log("PN ID " + tr[0]['cells'][1]["innerHTML"] + " a été agrandi.");  //logs the specific policy ID and state for accessibility
    }
});

$('#pn-table tbody').on('keydown', 'td.dt-control', function(e) {
    if (e.keyCode === 13) { // Enter key
        var tr = $(this).closest('tr');
        var row = table.row(tr);
        var button = $(this).find('button.dt-control');

        if (row.child.isShown()) {
            // This row is already open - close it
            row.child.hide();
            button.text('Agrandir');
			console.log("PN ID " + tr[0]['cells'][1]["innerHTML"] + " a été réduit.");  //logs the specific policy ID and state for accessibility
        } else {
            // Open this row
            var childContent = tr.data('child-content');
            var decodedContent = decodeURIComponent(childContent);
            row.child(format(decodedContent)).show();
            row.child().find('td').attr('tabindex', -1);
            button.text('Réduire');
			console.log("PN ID " + tr[0]['cells'][1]["innerHTML"] + " a été agrandi.");  //logs the specific policy ID and state for accessibility
        }
    }
});
    </script><script>
  // Function to update print buttons
  function updatePrintButtons() {
    // Select all print buttons
    let printButtons = document.querySelectorAll('.print-clause');

    // Add an onclick event listener to each print button
    printButtons.forEach(button => {
      button.removeEventListener('click', printButtonHandler); // Remove existing event listener
      button.addEventListener('click', printButtonHandler); // Add new event listener
      button.addEventListener('keydown', function(event) {
        if (event.keyCode === 13) { // Enter key
          printButtonHandler.call(this);
        }
      });
    });
  }

  // Handler for print button click event
  function printButtonHandler() {
    // Find the respective details tag
    let details = this.nextElementSibling;

    // Create a new hidden iframe
    let printFrame = document.createElement('iframe');
    printFrame.style.display = 'none';
    document.body.appendChild(printFrame);

    // Write the content of the details tag to the iframe
    printFrame.contentDocument.write(details.innerHTML);
    printFrame.contentDocument.close();

    // Print the iframe's content
    printFrame.contentWindow.print();

    printFrame.parentNode.removeChild(printFrame);
  }

$('#pn-table tbody').on('click keydown', 'td', function(event) {
    updatePrintButtons();
});
</script><script>
document.addEventListener('keydown', function(event) {
    const key = event.key;
    const activeElement = document.activeElement;
    if (activeElement.tagName === 'TD') {
        let row = activeElement.parentElement.rowIndex;
        let col = activeElement.cellIndex;
        const table = activeElement.closest('table');

        switch (key) {
            case 'ArrowUp':
                if (row > 0) row--;
                break;
            case 'ArrowDown':
                if (row < table.rows.length - 1) row++;
                break;
            case 'ArrowLeft':
                if (col > 0) col--;
                break;
            case 'ArrowRight':
                if (col < table.rows[row].cells.length - 1) col++;
                break;
            default:
                return;
        }
        try {
            table.rows[row].cells[col].focus();
        } catch (error) {
            col = 0;
            if (table.rows[row] && table.rows[row].cells[col]) {
                table.rows[row].cells[col].focus();
            }
        }
        event.preventDefault();
    }
});
</script>